{"version":3,"file":"index.js","sources":["../dist-src/QrReader/utils.js","../dist-src/QrReader/hooks.js","../dist-src/QrReader/styles.js","../dist-src/QrReader/index.js"],"sourcesContent":["export const isMediaDevicesSupported = () => {\n  const isMediaDevicesSupported = typeof navigator !== 'undefined' && !!navigator.mediaDevices;\n\n  if (!isMediaDevicesSupported) {\n    console.warn(`[ReactQrReader]: MediaDevices API has no support for your browser. You can fix this by running \"npm i webrtc-adapter\"`);\n  }\n\n  return isMediaDevicesSupported;\n};\nexport const isValidType = (value, name, type) => {\n  const isValid = typeof value === type;\n\n  if (!isValid) {\n    console.warn(`[ReactQrReader]: Expected \"${name}\" to be a of type \"${type}\".`);\n  }\n\n  return isValid;\n};","import { useEffect, useRef } from 'react';\nimport { BrowserQRCodeReader } from '@zxing/browser';\nimport { isMediaDevicesSupported, isValidType } from \"./utils.js\"; // TODO: add support for debug logs\n\nexport const useQrReader = ({\n  scanDelay: delayBetweenScanAttempts,\n  constraints: video,\n  onResult,\n  videoId\n}) => {\n  const controlsRef = useRef(null);\n  useEffect(() => {\n    const codeReader = new BrowserQRCodeReader(null, {\n      delayBetweenScanAttempts\n    });\n\n    if (!isMediaDevicesSupported() && isValidType(onResult, 'onResult', 'function')) {\n      const message = 'MediaDevices API has no support for your browser. You can fix this by running \"npm i webrtc-adapter\"';\n      onResult(null, new Error(message), codeReader);\n    }\n\n    if (isValidType(video, 'constraints', 'object')) {\n      codeReader.decodeFromConstraints({\n        video\n      }, videoId, (result, error) => {\n        if (isValidType(onResult, 'onResult', 'function')) {\n          onResult(result, error, codeReader);\n        }\n      }).then(controls => controlsRef.current = controls).catch(error => {\n        if (isValidType(onResult, 'onResult', 'function')) {\n          onResult(null, error, codeReader);\n        }\n      });\n    }\n\n    return () => {\n      var _controlsRef$current;\n\n      (_controlsRef$current = controlsRef.current) === null || _controlsRef$current === void 0 ? void 0 : _controlsRef$current.stop();\n    };\n  }, []);\n};","export const styles = {\n  container: {\n    width: '100%',\n    paddingTop: '100%',\n    overflow: 'hidden',\n    position: 'relative'\n  },\n  video: {\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    display: 'block',\n    overflow: 'hidden',\n    position: 'absolute',\n    transform: undefined\n  }\n};","import * as React from 'react';\nimport { styles } from \"./styles.js\";\nimport { useQrReader } from \"./hooks.js\";\nexport const QrReader = ({\n  videoContainerStyle,\n  containerStyle,\n  videoStyle,\n  constraints,\n  ViewFinder,\n  scanDelay,\n  className,\n  onResult,\n  videoId\n}) => {\n  useQrReader({\n    constraints,\n    scanDelay,\n    onResult,\n    videoId\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: className,\n    style: containerStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: { ...styles.container,\n      ...videoContainerStyle\n    }\n  }, !!ViewFinder && /*#__PURE__*/React.createElement(ViewFinder, null), /*#__PURE__*/React.createElement(\"video\", {\n    muted: true,\n    id: videoId,\n    style: { ...styles.video,\n      ...videoStyle,\n      transform: (constraints === null || constraints === void 0 ? void 0 : constraints.facingMode) === 'user' && 'scaleX(-1)'\n    }\n  })));\n};\nQrReader.displayName = 'QrReader';\nQrReader.defaultProps = {\n  constraints: {\n    facingMode: 'user'\n  },\n  videoId: 'video',\n  scanDelay: 500\n};"],"names":["React.createElement"],"mappings":"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"}