{"version":3,"file":"index.js","sources":["../dist-src/QrReader/utils.js","../dist-src/QrReader/hooks.js","../dist-src/QrReader/styles.js","../dist-src/QrReader/index.js"],"sourcesContent":["export const isMediaDevicesSupported = () => {\n  const isMediaDevicesSupported = typeof navigator !== 'undefined' && !!navigator.mediaDevices;\n\n  if (!isMediaDevicesSupported) {\n    console.warn(`[ReactQrReader]: MediaDevices API has no support for your browser. You can fix this by running \"npm i webrtc-adapter\"`);\n  }\n\n  return isMediaDevicesSupported;\n};\nexport const isValidType = (value, name, type) => {\n  const isValid = typeof value === type;\n\n  if (!isValid) {\n    console.warn(`[ReactQrReader]: Expected \"${name}\" to be a of type \"${type}\".`);\n  }\n\n  return isValid;\n};","import { useEffect, useRef } from 'react';\nimport { BrowserQRCodeReader } from '@zxing/browser';\nimport { isMediaDevicesSupported, isValidType } from \"./utils.js\"; // TODO: add support for debug logs\n\nexport const useQrReader = ({\n  scanDelay: delayBetweenScanAttempts,\n  constraints: video,\n  onResult,\n  videoId\n}) => {\n  const controlsRef = useRef(null);\n  useEffect(() => {\n    const codeReader = new BrowserQRCodeReader(null, {\n      delayBetweenScanAttempts\n    });\n\n    if (!isMediaDevicesSupported() && isValidType(onResult, 'onResult', 'function')) {\n      const message = 'MediaDevices API has no support for your browser. You can fix this by running \"npm i webrtc-adapter\"';\n      onResult(null, new Error(message), codeReader);\n    }\n\n    if (isValidType(video, 'constraints', 'object')) {\n      codeReader.decodeFromConstraints({\n        video\n      }, videoId, (result, error) => {\n        if (isValidType(onResult, 'onResult', 'function')) {\n          onResult(result, error, codeReader);\n        }\n      }).then(controls => controlsRef.current = controls).catch(error => {\n        if (isValidType(onResult, 'onResult', 'function')) {\n          onResult(null, error, codeReader);\n        }\n      });\n    }\n\n    return () => {\n      var _controlsRef$current;\n\n      (_controlsRef$current = controlsRef.current) === null || _controlsRef$current === void 0 ? void 0 : _controlsRef$current.stop();\n    };\n  }, []);\n};","export const styles = {\n  container: {\n    width: '100%',\n    paddingTop: '100%',\n    overflow: 'hidden',\n    position: 'relative'\n  },\n  video: {\n    top: 0,\n    left: 0,\n    width: '100%',\n    height: '100%',\n    display: 'block',\n    overflow: 'hidden',\n    position: 'absolute',\n    transform: undefined\n  }\n};","import * as React from 'react';\nimport { styles } from \"./styles.js\";\nimport { useQrReader } from \"./hooks.js\";\nexport const QrReader = ({\n  videoContainerStyle,\n  containerStyle,\n  videoStyle,\n  constraints,\n  ViewFinder,\n  scanDelay,\n  className,\n  onResult,\n  videoId\n}) => {\n  useQrReader({\n    constraints,\n    scanDelay,\n    onResult,\n    videoId\n  });\n  return /*#__PURE__*/React.createElement(\"section\", {\n    className: className,\n    style: containerStyle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: { ...styles.container,\n      ...videoContainerStyle\n    }\n  }, !!ViewFinder && /*#__PURE__*/React.createElement(ViewFinder, null), /*#__PURE__*/React.createElement(\"video\", {\n    muted: true,\n    id: videoId,\n    style: { ...styles.video,\n      ...videoStyle,\n      transform: (constraints === null || constraints === void 0 ? void 0 : constraints.facingMode) === 'user' && 'scaleX(-1)'\n    }\n  })));\n};\nQrReader.displayName = 'QrReader';\nQrReader.defaultProps = {\n  constraints: {\n    facingMode: 'user'\n  },\n  videoId: 'video',\n  scanDelay: 500\n};"],"names":["isMediaDevicesSupported","navigator","mediaDevices","console","warn","isValidType","value","name","type","isValid","useQrReader","scanDelay","delayBetweenScanAttempts","constraints","video","onResult","videoId","controlsRef","useRef","useEffect","codeReader","BrowserQRCodeReader","message","Error","decodeFromConstraints","result","error","then","controls","current","catch","_controlsRef$current","stop","styles","container","width","paddingTop","overflow","position","top","left","height","display","transform","undefined","QrReader","videoContainerStyle","containerStyle","videoStyle","ViewFinder","className","React","style","muted","id","facingMode","displayName","defaultProps"],"mappings":"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"}